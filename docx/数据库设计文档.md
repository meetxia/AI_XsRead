# æ•°æ®åº“è®¾è®¡æ–‡æ¡£

> æ–‡å­—ä¹‹å¢ƒ - MySQLæ•°æ®åº“è®¾è®¡  
> ç‰ˆæœ¬: v1.0  
> åˆ›å»ºæ—¥æœŸ: 2025-10-27

---

## ğŸ“‹ æ•°æ®åº“åŸºæœ¬ä¿¡æ¯

### å¼€å‘ç¯å¢ƒ
- **æ•°æ®åº“ç±»å‹**: MySQL 5.7+
- **å­—ç¬¦é›†**: utf8mb4
- **æ’åºè§„åˆ™**: utf8mb4_unicode_ci
- **æœ¬åœ°æ•°æ®åº“åœ°å€**: 127.0.0.1:3306
- **ç®¡ç†å·¥å…·**: phpMyAdmin (http://127.0.0.1/phpmyadmin/)
- **æ•°æ®åº“åç§°**: ai_xsread
- **ç”¨æˆ·å**: toefl_user
- **å¯†ç **: mojz168168-

### ç”Ÿäº§ç¯å¢ƒ
- **éƒ¨ç½²æ–¹å¼**: æœ¬åœ°å¼€å‘å®Œæˆåä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨
- **æ•°æ®è¿ç§»**: ä½¿ç”¨SQLå¯¼å‡º/å¯¼å…¥

---

## ğŸ“Š æ•°æ®åº“ç»“æ„æ€»è§ˆ

### æ ¸å¿ƒè¡¨ (9å¼ )
```
1. users           - ç”¨æˆ·è¡¨
2. novels          - å°è¯´è¡¨
3. chapters        - ç« èŠ‚è¡¨
4. categories      - åˆ†ç±»è¡¨
5. bookshelf       - ä¹¦æ¶è¡¨
6. reading_progress - é˜…è¯»è¿›åº¦è¡¨
7. user_likes      - ç‚¹èµè¡¨
8. comments        - è¯„è®ºè¡¨
9. reading_history - é˜…è¯»å†å²è¡¨
```

### è¾…åŠ©è¡¨ (3å¼ )
```
10. tags           - æ ‡ç­¾è¡¨
11. novel_tags     - å°è¯´æ ‡ç­¾å…³è”è¡¨
12. system_config  - ç³»ç»Ÿé…ç½®è¡¨
```

---

## ğŸ“ è¯¦ç»†è¡¨ç»“æ„è®¾è®¡

### 1. users - ç”¨æˆ·è¡¨

**è¡¨è¯´æ˜**: å­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’Œè´¦å·æ•°æ®

```sql
CREATE TABLE `users` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ç”¨æˆ·ID',
  `username` VARCHAR(50) NOT NULL UNIQUE COMMENT 'ç”¨æˆ·å',
  `email` VARCHAR(100) NOT NULL UNIQUE COMMENT 'é‚®ç®±',
  `password` VARCHAR(255) NOT NULL COMMENT 'å¯†ç (åŠ å¯†)',
  `nickname` VARCHAR(50) DEFAULT NULL COMMENT 'æ˜µç§°',
  `avatar` VARCHAR(255) DEFAULT NULL COMMENT 'å¤´åƒURL',
  `gender` TINYINT DEFAULT 0 COMMENT 'æ€§åˆ«: 0-ä¿å¯†, 1-å¥³, 2-ç”·',
  `birthday` DATE DEFAULT NULL COMMENT 'ç”Ÿæ—¥',
  `bio` TEXT DEFAULT NULL COMMENT 'ä¸ªäººç®€ä»‹',
  `role` VARCHAR(20) DEFAULT 'user' COMMENT 'è§’è‰²: user-æ™®é€šç”¨æˆ·, vip-VIP, author-ä½œè€…, admin-ç®¡ç†å‘˜',
  `status` TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€: 0-ç¦ç”¨, 1-æ­£å¸¸',
  `last_login_time` DATETIME DEFAULT NULL COMMENT 'æœ€åç™»å½•æ—¶é—´',
  `last_login_ip` VARCHAR(50) DEFAULT NULL COMMENT 'æœ€åç™»å½•IP',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  INDEX `idx_username` (`username`),
  INDEX `idx_email` (`email`),
  INDEX `idx_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç”¨æˆ·è¡¨';
```

---

### 2. categories - åˆ†ç±»è¡¨

**è¡¨è¯´æ˜**: å°è¯´åˆ†ç±»ä¿¡æ¯

```sql
CREATE TABLE `categories` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'åˆ†ç±»ID',
  `name` VARCHAR(50) NOT NULL UNIQUE COMMENT 'åˆ†ç±»åç§°',
  `icon` VARCHAR(50) DEFAULT NULL COMMENT 'åˆ†ç±»å›¾æ ‡',
  `description` VARCHAR(255) DEFAULT NULL COMMENT 'åˆ†ç±»æè¿°',
  `novel_count` INT UNSIGNED DEFAULT 0 COMMENT 'å°è¯´æ•°é‡',
  `sort_order` INT DEFAULT 0 COMMENT 'æ’åºé¡ºåº',
  `status` TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€: 0-ç¦ç”¨, 1-å¯ç”¨',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  INDEX `idx_status` (`status`),
  INDEX `idx_sort_order` (`sort_order`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='åˆ†ç±»è¡¨';
```

---

### 3. novels - å°è¯´è¡¨

**è¡¨è¯´æ˜**: å°è¯´åŸºæœ¬ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®

```sql
CREATE TABLE `novels` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'å°è¯´ID',
  `title` VARCHAR(100) NOT NULL COMMENT 'å°è¯´æ ‡é¢˜',
  `author` VARCHAR(50) NOT NULL COMMENT 'ä½œè€…åç§°',
  `author_id` INT UNSIGNED DEFAULT NULL COMMENT 'ä½œè€…ç”¨æˆ·ID(å¦‚æœæ˜¯å¹³å°ä½œè€…)',
  `category_id` INT UNSIGNED NOT NULL COMMENT 'åˆ†ç±»ID',
  `cover` VARCHAR(255) DEFAULT NULL COMMENT 'å°é¢å›¾URL',
  `description` TEXT COMMENT 'å°è¯´ç®€ä»‹',
  `word_count` INT UNSIGNED DEFAULT 0 COMMENT 'æ€»å­—æ•°',
  `chapter_count` INT UNSIGNED DEFAULT 0 COMMENT 'ç« èŠ‚æ•°',
  `status` TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€: 0-å®Œç»“, 1-è¿è½½ä¸­',
  `views` INT UNSIGNED DEFAULT 0 COMMENT 'æµè§ˆé‡',
  `likes` INT UNSIGNED DEFAULT 0 COMMENT 'ç‚¹èµæ•°',
  `collections` INT UNSIGNED DEFAULT 0 COMMENT 'æ”¶è—æ•°',
  `comments` INT UNSIGNED DEFAULT 0 COMMENT 'è¯„è®ºæ•°',
  `rating` DECIMAL(3,2) DEFAULT 0.00 COMMENT 'è¯„åˆ†(0-5)',
  `rating_count` INT UNSIGNED DEFAULT 0 COMMENT 'è¯„åˆ†äººæ•°',
  `is_recommended` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦æ¨è: 0-å¦, 1-æ˜¯',
  `is_hot` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦çƒ­é—¨: 0-å¦, 1-æ˜¯',
  `is_vip` TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦VIP: 0-å¦, 1-æ˜¯',
  `last_chapter_title` VARCHAR(100) DEFAULT NULL COMMENT 'æœ€æ–°ç« èŠ‚æ ‡é¢˜',
  `last_update_time` DATETIME DEFAULT NULL COMMENT 'æœ€åæ›´æ–°æ—¶é—´',
  `published_at` DATETIME DEFAULT NULL COMMENT 'å‘å¸ƒæ—¶é—´',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  INDEX `idx_author_id` (`author_id`),
  INDEX `idx_category_id` (`category_id`),
  INDEX `idx_status` (`status`),
  INDEX `idx_views` (`views`),
  INDEX `idx_likes` (`likes`),
  INDEX `idx_is_recommended` (`is_recommended`),
  INDEX `idx_is_hot` (`is_hot`),
  INDEX `idx_last_update_time` (`last_update_time`),
  FULLTEXT INDEX `idx_fulltext_search` (`title`, `author`, `description`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å°è¯´è¡¨';
```

---

### 4. chapters - ç« èŠ‚è¡¨

**è¡¨è¯´æ˜**: å°è¯´ç« èŠ‚å†…å®¹

```sql
CREATE TABLE `chapters` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ç« èŠ‚ID',
  `novel_id` INT UNSIGNED NOT NULL COMMENT 'å°è¯´ID',
  `chapter_number` INT UNSIGNED NOT NULL COMMENT 'ç« èŠ‚åºå·',
  `title` VARCHAR(100) NOT NULL COMMENT 'ç« èŠ‚æ ‡é¢˜',
  `content` LONGTEXT NOT NULL COMMENT 'ç« èŠ‚å†…å®¹',
  `word_count` INT UNSIGNED DEFAULT 0 COMMENT 'å­—æ•°',
  `is_free` TINYINT DEFAULT 1 COMMENT 'æ˜¯å¦å…è´¹: 0-ä»˜è´¹, 1-å…è´¹',
  `price` DECIMAL(10,2) DEFAULT 0.00 COMMENT 'ç« èŠ‚ä»·æ ¼',
  `views` INT UNSIGNED DEFAULT 0 COMMENT 'æµè§ˆé‡',
  `status` TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€: 0-è‰ç¨¿, 1-å·²å‘å¸ƒ',
  `publish_time` DATETIME DEFAULT NULL COMMENT 'å‘å¸ƒæ—¶é—´',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  UNIQUE KEY `uk_novel_chapter` (`novel_id`, `chapter_number`),
  INDEX `idx_novel_id` (`novel_id`),
  INDEX `idx_chapter_number` (`chapter_number`),
  INDEX `idx_publish_time` (`publish_time`),
  CONSTRAINT `fk_chapter_novel` FOREIGN KEY (`novel_id`) REFERENCES `novels` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç« èŠ‚è¡¨';
```

---

### 5. bookshelf - ä¹¦æ¶è¡¨

**è¡¨è¯´æ˜**: ç”¨æˆ·ä¹¦æ¶,è®°å½•ç”¨æˆ·æ”¶è—çš„å°è¯´

```sql
CREATE TABLE `bookshelf` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ä¹¦æ¶ID',
  `user_id` INT UNSIGNED NOT NULL COMMENT 'ç”¨æˆ·ID',
  `novel_id` INT UNSIGNED NOT NULL COMMENT 'å°è¯´ID',
  `type` VARCHAR(20) DEFAULT 'reading' COMMENT 'ç±»å‹: reading-æ­£åœ¨è¯», finished-å·²è¯»å®Œ, collected-æ”¶è—',
  `current_chapter_id` INT UNSIGNED DEFAULT NULL COMMENT 'å½“å‰é˜…è¯»ç« èŠ‚ID',
  `progress` TINYINT UNSIGNED DEFAULT 0 COMMENT 'é˜…è¯»è¿›åº¦ç™¾åˆ†æ¯”(0-100)',
  `reading_time` INT UNSIGNED DEFAULT 0 COMMENT 'é˜…è¯»æ—¶é•¿(åˆ†é’Ÿ)',
  `last_read_time` DATETIME DEFAULT NULL COMMENT 'æœ€åé˜…è¯»æ—¶é—´',
  `added_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'æ·»åŠ æ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  UNIQUE KEY `uk_user_novel` (`user_id`, `novel_id`),
  INDEX `idx_user_id` (`user_id`),
  INDEX `idx_novel_id` (`novel_id`),
  INDEX `idx_type` (`type`),
  INDEX `idx_last_read_time` (`last_read_time`),
  CONSTRAINT `fk_bookshelf_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_bookshelf_novel` FOREIGN KEY (`novel_id`) REFERENCES `novels` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ä¹¦æ¶è¡¨';
```

---

### 6. reading_progress - é˜…è¯»è¿›åº¦è¡¨

**è¡¨è¯´æ˜**: è¯¦ç»†çš„é˜…è¯»è¿›åº¦è®°å½•

```sql
CREATE TABLE `reading_progress` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'è¿›åº¦ID',
  `user_id` INT UNSIGNED NOT NULL COMMENT 'ç”¨æˆ·ID',
  `novel_id` INT UNSIGNED NOT NULL COMMENT 'å°è¯´ID',
  `chapter_id` INT UNSIGNED NOT NULL COMMENT 'ç« èŠ‚ID',
  `progress` TINYINT UNSIGNED DEFAULT 0 COMMENT 'å½“å‰ç« èŠ‚è¿›åº¦(0-100)',
  `scroll_position` INT DEFAULT 0 COMMENT 'æ»šåŠ¨ä½ç½®',
  `reading_time` INT UNSIGNED DEFAULT 0 COMMENT 'æœ¬æ¬¡é˜…è¯»æ—¶é•¿(åˆ†é’Ÿ)',
  `last_read_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'æœ€åé˜…è¯»æ—¶é—´',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  UNIQUE KEY `uk_user_novel` (`user_id`, `novel_id`),
  INDEX `idx_user_id` (`user_id`),
  INDEX `idx_novel_id` (`novel_id`),
  INDEX `idx_chapter_id` (`chapter_id`),
  CONSTRAINT `fk_progress_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_progress_novel` FOREIGN KEY (`novel_id`) REFERENCES `novels` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_progress_chapter` FOREIGN KEY (`chapter_id`) REFERENCES `chapters` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='é˜…è¯»è¿›åº¦è¡¨';
```

---

### 7. reading_history - é˜…è¯»å†å²è¡¨

**è¡¨è¯´æ˜**: ç”¨æˆ·é˜…è¯»å†å²è®°å½•

```sql
CREATE TABLE `reading_history` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'å†å²ID',
  `user_id` INT UNSIGNED NOT NULL COMMENT 'ç”¨æˆ·ID',
  `novel_id` INT UNSIGNED NOT NULL COMMENT 'å°è¯´ID',
  `chapter_id` INT UNSIGNED NOT NULL COMMENT 'ç« èŠ‚ID',
  `duration` INT UNSIGNED DEFAULT 0 COMMENT 'é˜…è¯»æ—¶é•¿(åˆ†é’Ÿ)',
  `read_time` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'é˜…è¯»æ—¶é—´',
  INDEX `idx_user_id` (`user_id`),
  INDEX `idx_novel_id` (`novel_id`),
  INDEX `idx_read_time` (`read_time`),
  CONSTRAINT `fk_history_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_history_novel` FOREIGN KEY (`novel_id`) REFERENCES `novels` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='é˜…è¯»å†å²è¡¨';
```

---

### 8. user_likes - ç‚¹èµè¡¨

**è¡¨è¯´æ˜**: ç”¨æˆ·ç‚¹èµè®°å½•

```sql
CREATE TABLE `user_likes` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ç‚¹èµID',
  `user_id` INT UNSIGNED NOT NULL COMMENT 'ç”¨æˆ·ID',
  `novel_id` INT UNSIGNED NOT NULL COMMENT 'å°è¯´ID',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'ç‚¹èµæ—¶é—´',
  UNIQUE KEY `uk_user_novel` (`user_id`, `novel_id`),
  INDEX `idx_user_id` (`user_id`),
  INDEX `idx_novel_id` (`novel_id`),
  CONSTRAINT `fk_like_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_like_novel` FOREIGN KEY (`novel_id`) REFERENCES `novels` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç‚¹èµè¡¨';
```

---

### 9. comments - è¯„è®ºè¡¨

**è¡¨è¯´æ˜**: å°è¯´è¯„è®º

```sql
CREATE TABLE `comments` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'è¯„è®ºID',
  `user_id` INT UNSIGNED NOT NULL COMMENT 'ç”¨æˆ·ID',
  `novel_id` INT UNSIGNED NOT NULL COMMENT 'å°è¯´ID',
  `content` TEXT NOT NULL COMMENT 'è¯„è®ºå†…å®¹',
  `rating` TINYINT UNSIGNED DEFAULT 5 COMMENT 'è¯„åˆ†(1-5)',
  `likes` INT UNSIGNED DEFAULT 0 COMMENT 'ç‚¹èµæ•°',
  `status` TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€: 0-éšè—, 1-æ˜¾ç¤º',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'è¯„è®ºæ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  INDEX `idx_user_id` (`user_id`),
  INDEX `idx_novel_id` (`novel_id`),
  INDEX `idx_created_at` (`created_at`),
  CONSTRAINT `fk_comment_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_comment_novel` FOREIGN KEY (`novel_id`) REFERENCES `novels` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯„è®ºè¡¨';
```

---

### 10. tags - æ ‡ç­¾è¡¨

**è¡¨è¯´æ˜**: å°è¯´æ ‡ç­¾

```sql
CREATE TABLE `tags` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'æ ‡ç­¾ID',
  `name` VARCHAR(50) NOT NULL UNIQUE COMMENT 'æ ‡ç­¾åç§°',
  `usage_count` INT UNSIGNED DEFAULT 0 COMMENT 'ä½¿ç”¨æ¬¡æ•°',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  INDEX `idx_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ ‡ç­¾è¡¨';
```

---

### 11. novel_tags - å°è¯´æ ‡ç­¾å…³è”è¡¨

**è¡¨è¯´æ˜**: å°è¯´å’Œæ ‡ç­¾çš„å¤šå¯¹å¤šå…³ç³»

```sql
CREATE TABLE `novel_tags` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ID',
  `novel_id` INT UNSIGNED NOT NULL COMMENT 'å°è¯´ID',
  `tag_id` INT UNSIGNED NOT NULL COMMENT 'æ ‡ç­¾ID',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  UNIQUE KEY `uk_novel_tag` (`novel_id`, `tag_id`),
  INDEX `idx_novel_id` (`novel_id`),
  INDEX `idx_tag_id` (`tag_id`),
  CONSTRAINT `fk_nt_novel` FOREIGN KEY (`novel_id`) REFERENCES `novels` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_nt_tag` FOREIGN KEY (`tag_id`) REFERENCES `tags` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å°è¯´æ ‡ç­¾å…³è”è¡¨';
```

---

### 12. system_config - ç³»ç»Ÿé…ç½®è¡¨

**è¡¨è¯´æ˜**: ç³»ç»Ÿå…¨å±€é…ç½®

```sql
CREATE TABLE `system_config` (
  `id` INT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'é…ç½®ID',
  `key` VARCHAR(100) NOT NULL UNIQUE COMMENT 'é…ç½®é”®',
  `value` TEXT COMMENT 'é…ç½®å€¼',
  `description` VARCHAR(255) DEFAULT NULL COMMENT 'é…ç½®è¯´æ˜',
  `type` VARCHAR(20) DEFAULT 'string' COMMENT 'é…ç½®ç±»å‹: string, number, boolean, json',
  `created_at` DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updated_at` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  INDEX `idx_key` (`key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç³»ç»Ÿé…ç½®è¡¨';
```

---

## ğŸ”— è¡¨å…³ç³»å›¾

```
users (ç”¨æˆ·)
  â”œâ”€ 1:N â†’ bookshelf (ä¹¦æ¶)
  â”œâ”€ 1:N â†’ reading_progress (é˜…è¯»è¿›åº¦)
  â”œâ”€ 1:N â†’ reading_history (é˜…è¯»å†å²)
  â”œâ”€ 1:N â†’ user_likes (ç‚¹èµ)
  â”œâ”€ 1:N â†’ comments (è¯„è®º)
  â””â”€ 1:N â†’ novels (ä½œè€…çš„å°è¯´)

novels (å°è¯´)
  â”œâ”€ N:1 â†’ categories (åˆ†ç±»)
  â”œâ”€ 1:N â†’ chapters (ç« èŠ‚)
  â”œâ”€ 1:N â†’ bookshelf (è¢«æ”¶è—)
  â”œâ”€ 1:N â†’ reading_progress (é˜…è¯»è¿›åº¦)
  â”œâ”€ 1:N â†’ user_likes (è¢«ç‚¹èµ)
  â”œâ”€ 1:N â†’ comments (è¯„è®º)
  â””â”€ N:N â†’ tags (æ ‡ç­¾, é€šè¿‡novel_tags)

chapters (ç« èŠ‚)
  â”œâ”€ N:1 â†’ novels (æ‰€å±å°è¯´)
  â””â”€ 1:N â†’ reading_progress (é˜…è¯»è¿›åº¦)
```

---

## ğŸ“ å­—æ®µè®¾è®¡è¯´æ˜

### 1. ä¸»é”®è®¾è®¡
- æ‰€æœ‰è¡¨ä½¿ç”¨è‡ªå¢INT UNSIGNEDä½œä¸ºä¸»é”®
- ä¸»é”®å‘½åç»Ÿä¸€ä¸º `id`

### 2. æ—¶é—´å­—æ®µ
- `created_at`: åˆ›å»ºæ—¶é—´, DEFAULT CURRENT_TIMESTAMP
- `updated_at`: æ›´æ–°æ—¶é—´, ON UPDATE CURRENT_TIMESTAMP
- ç»Ÿä¸€ä½¿ç”¨DATETIMEç±»å‹

### 3. çŠ¶æ€å­—æ®µ
- ä½¿ç”¨TINYINTç±»å‹
- 0è¡¨ç¤ºç¦ç”¨/å¦, 1è¡¨ç¤ºå¯ç”¨/æ˜¯

### 4. è®¡æ•°å­—æ®µ
- ä½¿ç”¨INT UNSIGNEDç±»å‹
- DEFAULT 0
- é€šè¿‡è§¦å‘å™¨æˆ–åº”ç”¨å±‚ç»´æŠ¤

### 5. æ–‡æœ¬å­—æ®µ
- çŸ­æ–‡æœ¬: VARCHAR
- é•¿æ–‡æœ¬: TEXT
- è¶…é•¿æ–‡æœ¬: LONGTEXT (ç« èŠ‚å†…å®¹)

---

## ğŸ” ç´¢å¼•è®¾è®¡è¯´æ˜

### 1. ä¸»é”®ç´¢å¼•
- æ¯ä¸ªè¡¨çš„idå­—æ®µè‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•

### 2. å”¯ä¸€ç´¢å¼•
- ç”¨æˆ·è¡¨: username, email
- åˆ†ç±»è¡¨: name
- æ ‡ç­¾è¡¨: name
- ä¹¦æ¶è¡¨: (user_id, novel_id)ç»„åˆå”¯ä¸€

### 3. æ™®é€šç´¢å¼•
- å¤–é”®å­—æ®µ
- ç»å¸¸ç”¨äºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ
- ç»å¸¸ç”¨äºæ’åºçš„å­—æ®µ

### 4. å…¨æ–‡ç´¢å¼•
- novelsè¡¨çš„title, author, descriptionå­—æ®µ
- ç”¨äºå…¨æ–‡æœç´¢åŠŸèƒ½

---

## ğŸ” æ•°æ®å®‰å…¨

### 1. å¯†ç åŠ å¯†
```javascript
// ä½¿ç”¨bcryptåŠ å¯†
const bcrypt = require('bcrypt');
const saltRounds = 10;
const hashedPassword = await bcrypt.hash(password, saltRounds);
```

### 2. å¤–é”®çº¦æŸ
- ä½¿ç”¨ON DELETE CASCADEè‡ªåŠ¨åˆ é™¤å…³è”æ•°æ®
- ä¿è¯æ•°æ®ä¸€è‡´æ€§

### 3. æ•°æ®å¤‡ä»½
```bash
# æ¯å¤©è‡ªåŠ¨å¤‡ä»½
mysqldump -u toefl_user -p ai_xsread > backup_$(date +%Y%m%d).sql
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. åˆ†è¡¨ç­–ç•¥
å½“æ•°æ®é‡å¢é•¿æ—¶è€ƒè™‘:
- reading_history æŒ‰æœˆåˆ†è¡¨
- chapters æŒ‰å°è¯´IDèŒƒå›´åˆ†è¡¨

### 2. è¯»å†™åˆ†ç¦»
- ä¸»åº“: å†™æ“ä½œ
- ä»åº“: è¯»æ“ä½œ

### 3. ç¼“å­˜ç­–ç•¥
```
çƒ­é—¨å°è¯´åˆ—è¡¨: Redisç¼“å­˜30åˆ†é’Ÿ
ç« èŠ‚å†…å®¹: Redisç¼“å­˜1å°æ—¶
ç”¨æˆ·ä¿¡æ¯: Redisç¼“å­˜15åˆ†é’Ÿ
```

### 4. æ…¢æŸ¥è¯¢ä¼˜åŒ–
```sql
-- å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 2;
```

---

## ğŸ§ª æµ‹è¯•æ•°æ®

å‚è€ƒ `database_init.sql` æ–‡ä»¶ä¸­çš„æµ‹è¯•æ•°æ®æ’å…¥è¯­å¥

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### 1. Windowsæœ¬åœ°å¼€å‘
- ç¡®ä¿MySQLæœåŠ¡å·²å¯åŠ¨
- ä½¿ç”¨phpMyAdminç®¡ç†æ•°æ®åº“
- å­—ç¬¦é›†è®¾ç½®ä¸ºutf8mb4

### 2. æ•°æ®è¿ç§»åˆ°Linux
```bash
# 1. å¯¼å‡ºæ•°æ®
mysqldump -u toefl_user -p ai_xsread > ai_xsread.sql

# 2. ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨
scp ai_xsread.sql user@server:/path/

# 3. åœ¨LinuxæœåŠ¡å™¨å¯¼å…¥
mysql -u username -p ai_xsread < ai_xsread.sql
```

### 3. å­—æ®µæ‰©å±•
å¦‚éœ€æ·»åŠ æ–°å­—æ®µ:
```sql
ALTER TABLE table_name 
ADD COLUMN new_column VARCHAR(100) DEFAULT NULL COMMENT 'è¯´æ˜';
```

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

1. `database_init.sql` - æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
2. `test_data.sql` - æµ‹è¯•æ•°æ®è„šæœ¬
3. `APIæ¥å£è®¾è®¡æ–‡æ¡£.md` - APIæ¥å£æ–‡æ¡£

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*æœ€åæ›´æ–°: 2025-10-27*  
*ç»´æŠ¤è€…: æ•°æ®åº“è®¾è®¡å›¢é˜Ÿ*

