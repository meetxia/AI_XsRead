# 微交互设计 - 5分钟快速上手 🚀

> 快速了解并开始使用全新的微交互设计组件

---

## 📦 已完成的优化

✅ **涟漪效果** - 点击反馈更生动  
✅ **手势交互** - 滑动、双击、长按、捏合  
✅ **下拉刷新** - 移动端标配功能  
✅ **进度条** - 优雅的加载状态  
✅ **触觉反馈** - 移动端震动反馈  

---

## 🎯 最常用的5个功能

### 1. 给按钮添加点击反馈 (2秒上手)

```vue
<template>
  <!-- 只需添加 v-feedback 指令 -->
  <button v-feedback @click="handleClick">
    点击我试试
  </button>
</template>
```

**效果**: 点击时会有涟漪扩散 + 轻微缩放 + 震动反馈 ✨

---

### 2. 阅读页左右滑动切换章节 (1分钟)

```vue
<template>
  <div ref="readingArea" class="reading-page">
    <!-- 阅读内容 -->
    <p>{{ chapterContent }}</p>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useSwipe } from '@/composables/useGestures'

const readingArea = ref(null)

// 监听左右滑动
useSwipe(readingArea, {
  onSwipeLeft: () => {
    console.log('下一章')
    // TODO: 切换到下一章
  },
  onSwipeRight: () => {
    console.log('上一章')
    // TODO: 切换到上一章
  }
})
</script>
```

---

### 3. 添加下拉刷新 (1分钟)

```vue
<template>
  <pull-to-refresh @refresh="loadNewData">
    <!-- 你的列表内容 -->
    <div v-for="item in list" :key="item.id">
      {{ item.title }}
    </div>
  </pull-to-refresh>
</template>

<script setup>
import { ref } from 'vue'
import PullToRefresh from '@/components/common/PullToRefresh.vue'

const list = ref([])

async function loadNewData() {
  // 加载数据
  await fetchData()
  console.log('刷新完成')
}
</script>
```

---

### 4. 显示上传进度 (30秒)

```vue
<template>
  <progress-bar :percent="progress" />
</template>

<script setup>
import { ref } from 'vue'
import ProgressBar from '@/components/common/ProgressBar.vue'

const progress = ref(0)

// 模拟上传
setInterval(() => {
  if (progress.value < 100) {
    progress.value += 10
  }
}, 500)
</script>
```

---

### 5. 双击显示/隐藏控制栏 (30秒)

```vue
<template>
  <div ref="contentArea">
    <!-- 内容 -->
    
    <div v-show="showControls" class="controls">
      <!-- 控制栏 -->
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useDoubleTap } from '@/composables/useGestures'

const contentArea = ref(null)
const showControls = ref(true)

useDoubleTap(contentArea, () => {
  showControls.value = !showControls.value
})
</script>
```

---

## 🎨 常见场景速查

### 小说卡片

```vue
<template>
  <ripple-effect>
    <div class="novel-card" @click="goToDetail">
      <img :src="novel.cover" />
      <h3>{{ novel.title }}</h3>
      
      <div class="actions">
        <button v-feedback @click.stop="addToBookshelf">
          加入书架
        </button>
      </div>
    </div>
  </ripple-effect>
</template>

<script setup>
import RippleEffect from '@/components/common/RippleEffect.vue'
</script>
```

### 底部导航

```vue
<template>
  <nav class="bottom-nav">
    <router-link 
      to="/" 
      v-feedback="{ scale: false, ripple: true }"
    >
      <i class="icon-home"></i>
      <span>首页</span>
    </router-link>
    
    <router-link 
      to="/bookshelf"
      v-feedback="{ scale: false, ripple: true }"
    >
      <i class="icon-book"></i>
      <span>书架</span>
    </router-link>
  </nav>
</template>
```

### 文件上传

```vue
<template>
  <div>
    <input type="file" @change="handleUpload" />
    
    <progress-bar 
      v-if="uploading"
      :percent="uploadPercent"
      show-status
      :status="uploadStatus"
      :status-text="statusText"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'
import ProgressBar from '@/components/common/ProgressBar.vue'

const uploading = ref(false)
const uploadPercent = ref(0)
const uploadStatus = ref('uploading')
const statusText = ref('')

async function handleUpload(event) {
  const file = event.target.files[0]
  uploading.value = true
  
  // 模拟上传
  const interval = setInterval(() => {
    uploadPercent.value += 10
    if (uploadPercent.value >= 100) {
      clearInterval(interval)
      uploadStatus.value = 'success'
      statusText.value = '上传成功'
    }
  }, 200)
}
</script>
```

---

## 💡 实用技巧

### 技巧1: 自定义涟漪颜色

```vue
<!-- 成功操作 - 绿色 -->
<button v-feedback="{ rippleColor: 'rgba(16, 185, 129, 0.3)' }">
  保存
</button>

<!-- 危险操作 - 红色 -->
<button v-feedback="{ rippleColor: 'rgba(239, 68, 68, 0.3)' }">
  删除
</button>
```

### 技巧2: 长按显示菜单

```vue
<template>
  <div ref="item" @contextmenu.prevent>
    长按我显示菜单
  </div>
  
  <div v-show="showMenu" class="context-menu">
    <!-- 菜单项 -->
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useLongPress } from '@/composables/useGestures'

const item = ref(null)
const showMenu = ref(false)

useLongPress(item, () => {
  showMenu.value = true
}, 500)
</script>
```

### 技巧3: 不确定进度

```vue
<!-- 当不知道具体进度时 -->
<progress-bar 
  indeterminate 
  loading-text="正在处理..." 
/>
```

### 技巧4: 仅在移动端启用手势

```vue
<script setup>
import { ref, onMounted } from 'vue'
import { useSwipe } from '@/composables/useGestures'

const isMobile = ref(false)
const gestureArea = ref(null)

onMounted(() => {
  // 检测是否为移动端
  isMobile.value = /mobile|android|iphone|ipad/i.test(navigator.userAgent)
  
  if (isMobile.value) {
    useSwipe(gestureArea, {
      onSwipeLeft: () => nextPage(),
      onSwipeRight: () => prevPage()
    })
  }
})
</script>
```

---

## 🔧 调试技巧

### 查看手势事件

```vue
<script setup>
import { useGestures } from '@/composables/useGestures'

useGestures(targetRef, {
  swipeLeft: (data) => {
    console.log('向左滑动', data)
  },
  swipeRight: (data) => {
    console.log('向右滑动', data)
  },
  tap: (event) => {
    console.log('点击', event)
  }
})
</script>
```

### 测试触觉反馈

```javascript
// 在浏览器控制台测试
if ('vibrate' in navigator) {
  navigator.vibrate(100) // 震动100ms
  console.log('✅ 设备支持触觉反馈')
} else {
  console.log('❌ 设备不支持触觉反馈')
}
```

---

## 📱 移动端测试

### Chrome DevTools

1. 打开开发者工具 (F12)
2. 点击 "Toggle device toolbar" (Ctrl+Shift+M)
3. 选择移动设备模拟器
4. 测试手势和触摸交互

### 真机测试

1. 确保手机和电脑在同一局域网
2. 运行 `npm run dev`
3. 在手机浏览器访问 `http://你的电脑IP:5173`
4. 测试触觉反馈和手势

---

## 🎯 性能建议

### ✅ 推荐做法

```vue
<!-- 1. 在常用交互上使用 v-feedback -->
<button v-feedback @click="submit">提交</button>

<!-- 2. 列表中使用轻量级反馈 -->
<div v-for="item in list" :key="item.id">
  <button v-feedback="{ scale: false }">
    {{ item.name }}
  </button>
</div>

<!-- 3. 手势在需要的地方启用 -->
<div ref="readingArea">
  <!-- 仅在阅读页启用手势 -->
</div>
```

### ❌ 避免做法

```vue
<!-- ❌ 不要在每个小元素上都加涟漪 -->
<span v-feedback>文字</span>

<!-- ❌ 不要设置过长的动画时间 -->
<ripple-effect :duration="5000">
  <button>太慢了</button>
</ripple-effect>

<!-- ❌ 不要在滚动容器上启用冲突的手势 -->
<div class="scroll-container" ref="scrollArea">
  <!-- 会与原生滚动冲突 -->
</div>
```

---

## 🆘 常见问题

### Q1: 涟漪效果不显示？

**A**: 确保父元素有 `position: relative`

```css
.my-button {
  position: relative; /* 必须 */
}
```

### Q2: 手势不触发？

**A**: 检查元素是否正确绑定

```vue
<script setup>
import { ref, onMounted } from 'vue'

const element = ref(null)

onMounted(() => {
  // 确保元素存在
  console.log('元素:', element.value)
  
  if (!element.value) {
    console.error('元素未找到!')
  }
})
</script>
```

### Q3: 下拉刷新不工作？

**A**: 确保容器可以滚动

```vue
<pull-to-refresh style="height: 100vh; overflow-y: auto;">
  <!-- 内容 -->
</pull-to-refresh>
```

---

## 📚 完整文档

想了解更多？查看完整文档：

- 📖 [微交互设计组件使用指南](./微交互设计组件使用指南.md)
- 📝 [更新日志](./更新日志-微交互设计优化.md)
- 🎨 [用户体验增强报告](./本项目研究报告-项目经理/3-用户体验增强报告.md)

---

## 🎉 开始使用

现在你已经掌握了基础用法，开始在你的项目中使用这些组件吧！

```vue
<template>
  <div class="my-page">
    <!-- 下拉刷新 -->
    <pull-to-refresh @refresh="refresh">
      <!-- 列表 -->
      <div v-for="item in items" :key="item.id">
        <!-- 点击反馈 -->
        <div v-feedback @click="viewItem(item)">
          {{ item.title }}
        </div>
      </div>
    </pull-to-refresh>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import PullToRefresh from '@/components/common/PullToRefresh.vue'

const items = ref([])

async function refresh() {
  items.value = await fetchItems()
}
</script>
```

---

**祝你使用愉快！** 🎊

有问题？欢迎提 Issue 或查看完整文档！

