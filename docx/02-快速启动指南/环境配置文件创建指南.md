# 环境配置文件创建指南

由于 `.env` 文件被 git 忽略（不会提交到版本库），你需要手动创建这些配置文件。

## 需要创建的配置文件

### 1. admin-frontend/.env

在 `admin-frontend` 目录下创建 `.env` 文件，内容如下：

```env
# 应用标题
VITE_APP_TITLE=文字之境后台管理系统

# 后端API地址
VITE_APP_BASE_API=http://localhost:8001
```

**创建命令（PowerShell）：**
```powershell
cd admin-frontend
@"
VITE_APP_TITLE=文字之境后台管理系统
VITE_APP_BASE_API=http://localhost:8001
"@ | Out-File -FilePath .env -Encoding utf8
```

### 2. admin-backend/.env

在 `admin-backend` 目录下创建 `.env` 文件，内容如下：

```env
PORT=8001
NODE_ENV=development
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=toefl_user
DB_PASSWORD=mojz168168
DB_NAME=ai_xsread
JWT_SECRET=admin-secret-key-change-in-production-2025
JWT_EXPIRES_IN=2h
JWT_REFRESH_EXPIRES_IN=7d
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=2097152
CORS_ORIGIN=http://localhost:3010,http://127.0.0.1:3010
LOG_LEVEL=info
```

**创建命令（PowerShell）：**
```powershell
cd admin-backend
@"
PORT=8001
NODE_ENV=development
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=toefl_user
DB_PASSWORD=mojz168168
DB_NAME=ai_xsread
JWT_SECRET=admin-secret-key-change-in-production-2025
JWT_EXPIRES_IN=2h
JWT_REFRESH_EXPIRES_IN=7d
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=2097152
CORS_ORIGIN=http://localhost:3010,http://127.0.0.1:3010
LOG_LEVEL=info
"@ | Out-File -FilePath .env -Encoding utf8
```

## 验证配置

创建完成后，可以通过以下命令验证：

```powershell
# 检查 backend/.env
cd backend
Get-Content .env

# 检查 admin-backend/.env  
cd admin-backend
Get-Content .env

# 检查 ai-xsread-vue3/.env
cd ai-xsread-vue3
Get-Content .env

# 检查 admin-frontend/.env
cd admin-frontend
Get-Content .env
```

## 快速创建所有配置文件

在项目根目录运行以下PowerShell命令，一次性创建所有缺失的配置文件：

```powershell
# 创建 admin-frontend/.env
if (!(Test-Path "admin-frontend\.env")) {
    @"
VITE_APP_TITLE=文字之境后台管理系统
VITE_APP_BASE_API=http://localhost:8001
"@ | Out-File -FilePath "admin-frontend\.env" -Encoding utf8
    Write-Host "✓ 已创建 admin-frontend/.env" -ForegroundColor Green
} else {
    Write-Host "○ admin-frontend/.env 已存在" -ForegroundColor Yellow
}

# 创建 admin-backend/.env
if (!(Test-Path "admin-backend\.env")) {
    @"
PORT=8001
NODE_ENV=development
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=toefl_user
DB_PASSWORD=mojz168168
DB_NAME=ai_xsread
JWT_SECRET=admin-secret-key-change-in-production-2025
JWT_EXPIRES_IN=2h
JWT_REFRESH_EXPIRES_IN=7d
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=2097152
CORS_ORIGIN=http://localhost:3010,http://127.0.0.1:3010
LOG_LEVEL=info
"@ | Out-File -FilePath "admin-backend\.env" -Encoding utf8
    Write-Host "✓ 已创建 admin-backend/.env" -ForegroundColor Green
} else {
    Write-Host "○ admin-backend/.env 已存在" -ForegroundColor Yellow
}

Write-Host "`n所有配置文件创建完成！" -ForegroundColor Cyan
```

## 注意事项

1. **密码安全**：`.env` 文件包含敏感信息（数据库密码等），确保它已被 `.gitignore` 忽略
2. **环境差异**：开发环境和生产环境应使用不同的配置文件
3. **修改生效**：修改 `.env` 文件后需要重启对应的服务才能生效
4. **编码格式**：确保文件使用 UTF-8 编码保存

## 配置文件对照表

| 文件位置 | 端口 | 用途 | 状态 |
|---------|------|------|------|
| backend/.env | 8005 | 用户端后端配置 | ✓ 已存在 |
| ai-xsread-vue3/.env | 3008 | 用户端前端配置 | ✓ 已存在 |
| admin-backend/.env | 8001 | 管理后台后端配置 | ✗ 需创建 |
| admin-frontend/.env | 3010 | 管理后台前端配置 | ✗ 需创建 |

---

**创建完成后，请使用启动脚本启动服务：**
- Windows: 双击运行 `启动开发环境.bat`
- PowerShell: 运行 `.\启动开发环境.ps1`

