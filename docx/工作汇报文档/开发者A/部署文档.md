# éƒ¨ç½²æ–‡æ¡£

> é¡¹ç›®åç§°ï¼šæ–‡å­—ä¹‹å¢ƒ - AIå°è¯´é˜…è¯»å¹³å°  
> ç¼–å†™äººï¼šå¼€å‘è€…A  
> æ›´æ–°æ—¶é—´ï¼š2025å¹´11æœˆ17æ—¥  
> ç‰ˆæœ¬ï¼šv1.0

---

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
2. [æœ¬åœ°å¼€å‘](#æœ¬åœ°å¼€å‘)
3. [ç”Ÿäº§æ„å»º](#ç”Ÿäº§æ„å»º)
4. [æœåŠ¡å™¨éƒ¨ç½²](#æœåŠ¡å™¨éƒ¨ç½²)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10+ / macOS 10.15+ / Linux
- **Node.js**: >= 16.0.0
- **npm**: >= 8.0.0 (æˆ– pnpm >= 7.0.0)
- **Git**: >= 2.0.0

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

---

## æœ¬åœ°å¼€å‘

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# npm
npm run dev

# pnpm
pnpm dev

# yarn
yarn dev
```

**è®¿é—®åœ°å€ï¼š** http://localhost:3008

### å¼€å‘ç¯å¢ƒé…ç½®

**ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š** `.env.development`

```env
# å¼€å‘ç¯å¢ƒé…ç½®
VITE_APP_BASE_API=http://localhost:8000/api
VITE_APP_UPLOAD_URL=http://localhost:8000/upload
VITE_APP_CDN_URL=http://localhost:8000
```

### å¼€å‘å·¥å…·

**æ¨è VSCode æ’ä»¶ï¼š**
- Vue Language Features (Volar)
- ESLint
- Prettier
- Tailwind CSS IntelliSense

---

## ç”Ÿäº§æ„å»º

### æ„å»ºå‘½ä»¤

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### æ„å»ºè¾“å‡º

```
dist/
â”œâ”€â”€ index.html
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ index-[hash].js
â”‚   â”‚   â”œâ”€â”€ vue-vendor-[hash].js
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ index-[hash].css
â”‚   â””â”€â”€ images/
â””â”€â”€ ...
```

### ç¯å¢ƒå˜é‡

**ç”Ÿäº§ç¯å¢ƒæ–‡ä»¶ï¼š** `.env.production`

```env
# ç”Ÿäº§ç¯å¢ƒé…ç½®
VITE_APP_BASE_API=https://api.example.com/api
VITE_APP_UPLOAD_URL=https://cdn.example.com/upload
VITE_APP_CDN_URL=https://cdn.example.com
```

### æ„å»ºä¼˜åŒ–

**Vite é…ç½®è¦ç‚¹ï¼š**
- âœ… ä»£ç å‹ç¼©ï¼ˆTerserï¼‰
- âœ… ä»£ç åˆ†å‰²
- âœ… Tree Shaking
- âœ… ç§»é™¤ console
- âœ… èµ„æºhashå‘½å

---

## æœåŠ¡å™¨éƒ¨ç½²

### ä½¿ç”¨ Nginx

#### 1. Nginx é…ç½®

```nginx
server {
    listen 80;
    server_name example.com;
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    root /var/www/ai-xsread-vue3/dist;
    index index.html;
    
    # Gzip å‹ç¼©
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    gzip_min_length 1000;
    gzip_comp_level 6;
    
    # å‰ç«¯è·¯ç”±æ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # API ä»£ç†
    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

#### 2. HTTPS é…ç½®ï¼ˆæ¨èï¼‰

```nginx
server {
    listen 443 ssl http2;
    server_name example.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    # å…¶ä»–é…ç½®åŒä¸Š
}

# HTTP é‡å®šå‘åˆ° HTTPS
server {
    listen 80;
    server_name example.com;
    return 301 https://$server_name$request_uri;
}
```

### éƒ¨ç½²æ­¥éª¤

#### 1. æ„å»ºé¡¹ç›®

```bash
# åœ¨æœ¬åœ°æ„å»º
npm run build

# æˆ–åœ¨æœåŠ¡å™¨ä¸Šæ„å»º
cd /var/www/ai-xsread-vue3
git pull
npm install
npm run build
```

#### 2. ä¸Šä¼ æ–‡ä»¶

```bash
# ä½¿ç”¨ SCP
scp -r dist/* user@server:/var/www/ai-xsread-vue3/dist/

# æˆ–ä½¿ç”¨ rsync
rsync -avz dist/ user@server:/var/www/ai-xsread-vue3/dist/
```

#### 3. é‡å¯ Nginx

```bash
# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯æœåŠ¡
sudo systemctl restart nginx
```

### ä½¿ç”¨ Docker

#### Dockerfile

```dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:18-alpine as builder

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build

# ç”Ÿäº§é˜¶æ®µ
FROM nginx:alpine

COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

#### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker build -t ai-xsread-vue3 .

# è¿è¡Œå®¹å™¨
docker run -d -p 80:80 ai-xsread-vue3
```

### ä½¿ç”¨ PM2ï¼ˆNode.js æœåŠ¡ï¼‰

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨æœåŠ¡
pm2 start npm --name "ai-xsread" -- run preview

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs ai-xsread

# é‡å¯æœåŠ¡
pm2 restart ai-xsread

# åœæ­¢æœåŠ¡
pm2 stop ai-xsread
```

---

## CDN é…ç½®

### ä½¿ç”¨ CDN åŠ é€Ÿ

#### 1. ç¬¬ä¸‰æ–¹åº“ CDN

```html
<!-- index.html -->
<script src="https://cdn.jsdelivr.net/npm/vue@3.3.0/dist/vue.global.prod.js"></script>
```

#### 2. é™æ€èµ„æº CDN

**Vite é…ç½®ï¼š**

```javascript
export default defineConfig({
  base: 'https://cdn.example.com/',
  build: {
    // ...
  }
})
```

---

## ç¯å¢ƒå˜é‡è¯´æ˜

### å¼€å‘ç¯å¢ƒ (.env.development)

```env
# API åœ°å€
VITE_APP_BASE_API=http://localhost:8000/api

# ä¸Šä¼ åœ°å€
VITE_APP_UPLOAD_URL=http://localhost:8000/upload

# CDN åœ°å€
VITE_APP_CDN_URL=http://localhost:8000

# æ˜¯å¦å¼€å¯ Mock
VITE_APP_MOCK=true
```

### ç”Ÿäº§ç¯å¢ƒ (.env.production)

```env
# API åœ°å€
VITE_APP_BASE_API=https://api.example.com/api

# ä¸Šä¼ åœ°å€
VITE_APP_UPLOAD_URL=https://cdn.example.com/upload

# CDN åœ°å€
VITE_APP_CDN_URL=https://cdn.example.com

# æ˜¯å¦å¼€å¯ Mock
VITE_APP_MOCK=false
```

---

## å¸¸è§é—®é¢˜

### Q1: æ„å»ºåé¡µé¢ç©ºç™½ï¼Ÿ

**A:** æ£€æŸ¥ `vite.config.js` ä¸­çš„ `base` é…ç½®æ˜¯å¦æ­£ç¡®ã€‚

```javascript
export default defineConfig({
  base: '/', // æ ¹è·¯å¾„éƒ¨ç½²
  // æˆ–
  base: '/ai-xsread/', // å­è·¯å¾„éƒ¨ç½²
})
```

### Q2: è·¯ç”±åˆ·æ–° 404ï¼Ÿ

**A:** é…ç½® Nginx å°†æ‰€æœ‰è¯·æ±‚é‡å®šå‘åˆ° index.html

```nginx
location / {
    try_files $uri $uri/ /index.html;
}
```

### Q3: API è·¨åŸŸé—®é¢˜ï¼Ÿ

**A:** é…ç½® Nginx ä»£ç†æˆ–åç«¯ CORS

```nginx
location /api {
    proxy_pass http://localhost:8000;
    add_header Access-Control-Allow-Origin *;
}
```

### Q4: é™æ€èµ„æº 404ï¼Ÿ

**A:** æ£€æŸ¥èµ„æºè·¯å¾„é…ç½®

```javascript
// vite.config.js
export default defineConfig({
  base: '/ai-xsread/', // æ ¹æ®å®é™…éƒ¨ç½²è·¯å¾„é…ç½®
})
```

### Q5: ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆï¼Ÿ

**A:** ç¡®ä¿å˜é‡ä»¥ `VITE_` å¼€å¤´ï¼Œå¹¶é‡å¯å¼€å‘æœåŠ¡å™¨ã€‚

---

## æ€§èƒ½ç›‘æ§

### Nginx æ—¥å¿—

```nginx
# è®¿é—®æ—¥å¿—
access_log /var/log/nginx/ai-xsread-access.log;

# é”™è¯¯æ—¥å¿—
error_log /var/log/nginx/ai-xsread-error.log;
```

### æ€§èƒ½ç›‘æ§å·¥å…·

- **Google Analytics** - ç”¨æˆ·è¡Œä¸ºåˆ†æ
- **Sentry** - é”™è¯¯è¿½è¸ª
- **Lighthouse** - æ€§èƒ½è¯„åˆ†
- **WebPageTest** - åŠ è½½æ€§èƒ½æµ‹è¯•

---

## å¤‡ä»½ä¸å›æ»š

### å¤‡ä»½ç­–ç•¥

```bash
# å¤‡ä»½å½“å‰ç‰ˆæœ¬
cp -r /var/www/ai-xsread-vue3/dist /var/www/backups/ai-xsread-$(date +%Y%m%d)

# æ•°æ®åº“å¤‡ä»½
mysqldump -u root -p ai_xsread > backup-$(date +%Y%m%d).sql
```

### å›æ»šæ–¹æ¡ˆ

```bash
# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
cp -r /var/www/backups/ai-xsread-20251110/dist /var/www/ai-xsread-vue3/

# é‡å¯ Nginx
sudo systemctl restart nginx
```

---

## å®‰å…¨å»ºè®®

1. âœ… ä½¿ç”¨ HTTPS
2. âœ… é…ç½® CORS
3. âœ… è®¾ç½®å®‰å…¨å¤´
4. âœ… å®šæœŸæ›´æ–°ä¾èµ–
5. âœ… æ•æ„Ÿä¿¡æ¯åŠ å¯†

### Nginx å®‰å…¨å¤´

```nginx
add_header X-Frame-Options "SAMEORIGIN";
add_header X-XSS-Protection "1; mode=block";
add_header X-Content-Type-Options "nosniff";
```

---

## æ€»ç»“

æŒ‰ç…§æœ¬æ–‡æ¡£çš„æ­¥éª¤ï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆé¡¹ç›®çš„éƒ¨ç½²ä¸Šçº¿ã€‚å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPS å’Œ CDN åŠ é€Ÿï¼Œä»¥è·å¾—æœ€ä½³æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

**é¡¹ç›®å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥æ­£å¼éƒ¨ç½²ï¼** ğŸš€

---

**ç¼–å†™äººï¼šå¼€å‘è€…A**  
**æ›´æ–°æ—¶é—´ï¼š2025å¹´11æœˆ17æ—¥**

